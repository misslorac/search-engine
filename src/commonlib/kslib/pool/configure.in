AC_PREREQ(2.59)
AC_INIT([Pool], [POOL_VERSION], [ruijie.guo@alibaba-inc.com])
POOL_MAJOR_VERSION=1
POOL_MINOR_VERSION=0
POOL_MICRO_VERSION=2
POOL_RELEASE=beta8
POOL_VERSION=$POOL_MAJOR_VERSION.$POOL_MINOR_VERSION.$POOL_MICRO_VERSION
LT_MAJOR=0
LT_REVISION=0
LT_AGE=0
AC_SUBST(LT_MAJOR)
AC_SUBST(LT_REVISION)
AC_SUBST(LT_AGE)
AC_SUBST(POOL_MAJOR_VERSION)
AC_SUBST(POOL_MINOR_VERSION)
AC_SUBST(POOL_MICRO_VERSION)
AC_SUBST(POOL_RELEASE)
AC_SUBST(POOL_VERSION)
AC_SUBST([USER])
AC_SUBST([HOSTNAME])

AM_INIT_AUTOMAKE(pool, $POOL_VERSION)
AC_CONFIG_SRCDIR([src/ObjectPool.h])
AC_CONFIG_HEADER([config.h])

# Checks for programs.
AC_PROG_CXX
AC_PROG_CC
AC_PROG_CPP
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_MAKE_SET
AC_PROG_LIBTOOL
AC_LANG_CPLUSPLUS 

# Checks for libraries.

# Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS([stdlib.h string.h])

# Checks for typedefs, structures, and compiler characteristics.
AC_HEADER_STDBOOL
AC_C_CONST
AC_C_INLINE
AC_TYPE_SIZE_T
AC_CHECK_TYPES([ptrdiff_t])

# Checks for library functions.
AC_FUNC_MALLOC
AC_FUNC_MMAP
AC_FUNC_STAT
AC_CHECK_FUNCS([memset munmap])

AC_CONFIG_FILES([Makefile
                src/Makefile
                test/Makefile
                example/Makefile
		pool.spec
                ])
AC_OUTPUT
